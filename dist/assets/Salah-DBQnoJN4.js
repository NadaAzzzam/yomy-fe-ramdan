import{r as g,j as e,v as H,w as K}from"./vendor-Dv0kmEEh.js";import{C as E}from"./Card-C6kSUSbx.js";import{S as T}from"./Sec-Dtzh3dZw.js";import{C as O}from"./Chk-CFT1EWr7.js";import{u as z,a as A,f}from"./index-B8U0s5eJ.js";import{k as v,P as Z,T as W,l as Y,A as G}from"./data-3aVLcfxd.js";import{b as U,g as V,c as u,p as q,s as J}from"./api-B0mGiC_X.js";function Q({label:i,icon:l,time:n,isNext:r,color:o}){const s=z(),d=A();return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,padding:"10px 12px",borderRadius:14,marginBottom:4,background:r?d?`${o}15`:`${o}12`:"transparent",border:r?`1.5px solid ${o}30`:"1.5px solid transparent",transition:"all .3s"},children:[e.jsx("span",{style:{fontSize:20,width:28,textAlign:"center"},children:l}),e.jsx("span",{style:{flex:1,fontSize:14,fontWeight:r?800:600,color:r?o:s.text},children:i}),e.jsx("span",{style:{fontSize:15,fontWeight:700,fontFamily:"monospace",color:r?o:s.textSec,letterSpacing:.5,direction:"ltr"},children:n}),r&&e.jsx("span",{style:{fontSize:8,background:`${o}20`,color:o,fontWeight:800,padding:"2px 8px",borderRadius:8},children:"Ø§Ù„ØªØ§Ù„ÙŠ"})]})}function X({item:i,done:l,onToggle:n}){const r=z(),o=A(),[s,d]=g.useState(!1),p=i.importance==="muakkadah"?r.green:r.orange;return e.jsxs("div",{style:{marginBottom:6},children:[e.jsxs("div",{onClick:n,onKeyDown:c=>c.key==="Enter"&&n(),role:"button",tabIndex:0,style:{display:"flex",alignItems:"center",gap:10,padding:"11px 12px",borderRadius:14,background:l?`${r.green}0C`:o?`${r.card}`:r.cardAlt,border:`1px solid ${l?r.green+"25":"transparent"}`,cursor:"pointer",transition:"all .25s"},children:[e.jsx(O,{done:l,onClick:c=>{c?.stopPropagation?.(),n()},size:24}),e.jsx("div",{style:{flex:1,minWidth:0},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,flexWrap:"wrap"},children:[e.jsx("span",{style:{fontSize:13,fontWeight:700,color:l?r.green:r.text,textDecoration:l?"line-through":"none",transition:"color .25s"},children:i.label}),e.jsx("span",{style:{fontSize:9,fontWeight:700,color:p,background:`${p}15`,padding:"1px 7px",borderRadius:6},children:i.importanceLabel})]})}),e.jsx("button",{onClick:c=>{c.stopPropagation(),d(b=>!b)},style:{background:`${r.gold}12`,border:"none",borderRadius:8,padding:"4px 8px",cursor:"pointer",fontSize:10,color:r.gold,fontWeight:700,fontFamily:f,transition:"all .2s",flexShrink:0},children:s?"Ø¥Ø®ÙØ§Ø¡":"ğŸ“œ Ø§Ù„Ø­Ø¯ÙŠØ«"})]}),s&&e.jsxs("div",{style:{margin:"4px 0 0 36px",padding:"10px 14px",borderRadius:12,background:o?`linear-gradient(135deg, ${r.gold}08, ${r.gold}04)`:`linear-gradient(135deg, ${r.gold}0C, ${r.gold}06)`,border:`1px solid ${r.gold}18`,animation:"fadeIn .3s"},children:[e.jsxs("p",{style:{fontFamily:"Amiri",fontSize:13,color:r.text,lineHeight:2,margin:"0 0 4px"},children:['"',i.hadith,'"']}),e.jsxs("p",{style:{fontSize:10,color:r.gold,margin:0,fontWeight:600},children:["â€” ",i.source]})]})]})}function ee({sound:i,selected:l,onSelect:n}){const r=z(),o=A(),[s,d]=g.useState(!1),[p,c]=g.useState(null),b=y=>{y.stopPropagation(),c(null),s?(J(),d(!1)):q(i.url).then(h=>{h?(d(!0),h.addEventListener("ended",()=>d(!1)),h.addEventListener("pause",()=>d(!1))):(d(!1),c("Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª"),setTimeout(()=>c(null),3e3))})};return e.jsxs("div",{onClick:n,onKeyDown:y=>y.key==="Enter"&&n(),role:"button",tabIndex:0,style:{position:"relative",display:"flex",alignItems:"center",gap:10,padding:"11px 13px",borderRadius:14,marginBottom:p?22:5,background:l?o?`${r.accent}12`:`${r.accent}0C`:o?r.card:r.cardAlt,border:l?`1.5px solid ${r.accent}35`:"1.5px solid transparent",cursor:"pointer",transition:"all .25s"},children:[e.jsx("div",{style:{width:22,height:22,borderRadius:"50%",border:`2.5px solid ${l?r.accent:r.muted+"55"}`,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,transition:"all .25s"},children:l&&e.jsx("div",{style:{width:10,height:10,borderRadius:"50%",background:r.accent}})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("p",{style:{fontSize:13,fontWeight:700,color:r.text,margin:0},children:i.label}),e.jsx("p",{style:{fontSize:10,color:r.muted,margin:"2px 0 0"},children:i.reciter})]}),e.jsx("button",{onClick:b,style:{width:36,height:36,borderRadius:12,border:"none",background:s?`${r.red}18`:`${r.accent}15`,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:16,transition:"all .2s",flexShrink:0},children:s?"â¹ï¸":"â–¶ï¸"}),p&&e.jsx("p",{style:{position:"absolute",bottom:-18,right:0,left:0,margin:0,fontSize:10,color:r.red,fontWeight:600,textAlign:"center",animation:"fadeIn .2s"},children:p})]})}function se({state:i,dispatch:l}){const n=z(),r=A(),{times:o,loading:s,error:d}=U(i.prayerCity,i.prayerCountry,i.prayerMethod),[p,c]=g.useState(new Date),[b,y]=g.useState(!1),[h,D]=g.useState(i.prayerCity),[w,L]=g.useState(i.prayerCountry);g.useEffect(()=>{const t=setInterval(()=>c(new Date),3e4);return()=>clearInterval(t)},[]);const j=g.useMemo(()=>o?V(o):null,[o,p]),B=g.useMemo(()=>{const t={};for(const a of v)t[a.prayerKey]||(t[a.prayerKey]=[]),t[a.prayerKey].push(a);return t},[]),k=v.length,S=v.filter(t=>i.nawafelChecks[t.id]).length,F=k>0?Math.round(S/k*100):0,$=v.filter(t=>t.importance==="muakkadah"&&t.id!=="witr"),P=$.filter(t=>i.nawafelChecks[t.id]).length,R=$.filter(t=>i.nawafelChecks[t.id]).reduce((t,a)=>t+a.rakaat,0),I=$.reduce((t,a)=>t+a.rakaat,0),_=t=>{const a=Math.floor(t/60),m=t%60;return a>0?`${a} Ø³Ø§Ø¹Ø© ${m>0?`Ùˆ ${m} Ø¯Ù‚ÙŠÙ‚Ø©`:""}`:`${m} Ø¯Ù‚ÙŠÙ‚Ø©`},M=()=>{h.trim()&&w.trim()&&(l({type:"SET_PRAYER_LOCATION",city:h.trim(),country:w.trim()}),y(!1))},N=o?[{key:"Fajr",label:"Ø§Ù„ÙØ¬Ø±",icon:"ğŸŒ…",time:u(o.Fajr),color:n.orange},{key:"Sunrise",label:"Ø§Ù„Ø´Ø±ÙˆÙ‚",icon:"â˜€ï¸",time:u(o.Sunrise),color:n.goldLight},{key:"Dhuhr",label:"Ø§Ù„Ø¸Ù‡Ø±",icon:"ğŸ”†",time:u(o.Dhuhr),color:n.gold},{key:"Asr",label:"Ø§Ù„Ø¹ØµØ±",icon:"ğŸŒ¤ï¸",time:u(o.Asr),color:n.accent},{key:"Maghrib",label:"Ø§Ù„Ù…ØºØ±Ø¨",icon:"ğŸŒ…",time:u(o.Maghrib),color:n.orange},{key:"Isha",label:"Ø§Ù„Ø¹Ø´Ø§Ø¡",icon:"ğŸŒ™",time:u(o.Isha),color:n.purple}]:[];return e.jsx(H,{children:e.jsx(K,{fullscreen:!0,className:"ion-padding",style:{fontFamily:f,"--background":n.bg,"--ion-background-color":n.bg,color:n.text},children:e.jsxs("div",{className:"ion-content-inner",style:{position:"relative"},children:[e.jsxs("div",{style:{textAlign:"center",padding:"10px 0 4px"},children:[e.jsx("span",{style:{fontSize:36},children:"ğŸ•Œ"}),e.jsx("h2",{style:{fontFamily:"Amiri",fontSize:22,color:n.goldLight,margin:"4px 0 2px"},children:"ØµÙ„Ø§ØªÙŠ"}),e.jsx("p",{style:{fontSize:11,color:n.muted,margin:0},children:"Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø© ÙˆØ§Ù„Ù†ÙˆØ§ÙÙ„ Ø§Ù„ÙŠÙˆÙ…ÙŠØ©"})]}),e.jsxs(E,{glow:!0,style:{marginTop:12},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},children:[e.jsx(T,{icon:"ğŸ•",text:"Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø©"}),e.jsxs("button",{onClick:()=>y(t=>!t),style:{background:`${n.muted}12`,border:"none",borderRadius:10,padding:"4px 10px",cursor:"pointer",fontSize:10,color:n.muted,fontWeight:600,fontFamily:f},children:["ğŸ“ ",i.prayerCity]})]}),b&&e.jsxs("div",{style:{padding:"12px",borderRadius:14,background:r?`${n.accent}08`:`${n.accent}06`,border:`1px solid ${n.accent}18`,marginBottom:10,animation:"fadeIn .3s"},children:[e.jsxs("div",{style:{display:"flex",gap:8,marginBottom:8},children:[e.jsx("input",{type:"text",value:h,onChange:t=>D(t.target.value),placeholder:"Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©",style:{flex:1,padding:"8px 12px",borderRadius:10,border:`1px solid ${n.border}50`,background:n.inputBg,color:n.text,fontSize:12,fontFamily:f,outline:"none"}}),e.jsx("input",{type:"text",value:w,onChange:t=>L(t.target.value),placeholder:"Ø§Ù„Ø¯ÙˆÙ„Ø©",style:{flex:1,padding:"8px 12px",borderRadius:10,border:`1px solid ${n.border}50`,background:n.inputBg,color:n.text,fontSize:12,fontFamily:f,outline:"none"}})]}),e.jsxs("div",{style:{display:"flex",gap:6,flexWrap:"wrap",marginBottom:8},children:[e.jsx("span",{style:{fontSize:10,color:n.muted,fontWeight:600},children:"Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø­Ø³Ø§Ø¨:"}),e.jsx("select",{value:i.prayerMethod,onChange:t=>l({type:"SET_PRAYER_METHOD",method:Number(t.target.value)}),style:{flex:1,padding:"5px 8px",borderRadius:8,border:`1px solid ${n.border}50`,background:n.inputBg,color:n.text,fontSize:11,fontFamily:f,outline:"none"},children:Z.map(t=>e.jsxs("option",{value:t.id,children:[t.label," (",t.region,")"]},t.id))})]}),e.jsx("button",{onClick:M,style:{width:"100%",padding:"8px",borderRadius:10,border:"none",background:`linear-gradient(135deg, ${n.accent}, ${n.purple})`,color:"#fff",fontSize:12,fontWeight:700,fontFamily:f,cursor:"pointer"},children:"Ø­ÙØ¸ Ø§Ù„Ù…ÙˆÙ‚Ø¹"})]}),s&&e.jsx("div",{style:{textAlign:"center",padding:"20px 0"},children:e.jsx("span",{style:{fontSize:11,color:n.muted},children:"Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ÙˆØ§Ù‚ÙŠØª..."})}),d&&!s&&e.jsx("div",{style:{textAlign:"center",padding:"16px",borderRadius:12,background:`${n.red}0C`,border:`1px solid ${n.red}20`},children:e.jsx("span",{style:{fontSize:12,color:n.red},children:"ØªØ¹Ø°Ù‘Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ÙˆØ§Ù‚ÙŠØª â€” ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ø³Ù… Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© ÙˆØ§Ù„Ø¥Ù†ØªØ±Ù†Øª"})}),o&&e.jsxs(e.Fragment,{children:[N.map(t=>e.jsx(Q,{label:t.label,icon:t.icon,time:t.time,isNext:j?.key===t.key,color:t.color},t.key)),j&&e.jsxs("div",{style:{marginTop:8,padding:"12px 14px",borderRadius:14,background:r?`linear-gradient(135deg, ${n.gold}10, ${n.accent}08)`:`linear-gradient(135deg, ${n.gold}14, ${n.accent}0A)`,border:`1px solid ${n.gold}20`,textAlign:"center"},children:[e.jsx("span",{style:{fontSize:10,color:n.gold,fontWeight:700},children:"â³ Ø§Ù„ØµÙ„Ø§Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©"}),e.jsxs("p",{style:{fontSize:15,fontWeight:800,color:n.text,margin:"4px 0 2px"},children:[j.label," â€” ",u(j.time)]}),e.jsxs("p",{style:{fontSize:11,color:n.muted,margin:0},children:["Ø¨Ø¹Ø¯ ",_(j.minutesLeft)]})]})]})]}),e.jsxs("div",{style:{marginTop:14,borderRadius:22,padding:"18px 18px 16px",background:r?`linear-gradient(135deg, ${n.green}0A, ${n.gold}06)`:`linear-gradient(135deg, ${n.green}0E, ${n.gold}08)`,border:`1.5px solid ${n.green}20`,position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:-15,left:-15,width:70,height:70,borderRadius:"50%",background:`${n.green}06`,pointerEvents:"none"}}),e.jsxs("div",{style:{position:"relative"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[e.jsx("span",{style:{fontSize:22},children:"ğŸ¡"}),e.jsxs("div",{style:{flex:1},children:[e.jsx("span",{style:{fontSize:11,color:n.green,fontWeight:700},children:"Ø¨ÙŠØªÙƒ ÙÙŠ Ø§Ù„Ø¬Ù†Ø©"}),e.jsxs("p",{style:{fontSize:10,color:n.muted,margin:"2px 0 0"},children:[R,"/",I," Ø±ÙƒØ¹Ø© Ù…Ø¤ÙƒØ¯Ø© Ø§Ù„ÙŠÙˆÙ…"]})]}),e.jsxs("span",{style:{fontSize:18,fontWeight:800,color:n.green},children:[F,"%"]})]}),e.jsx("div",{style:{width:"100%",height:8,background:`${n.green}15`,borderRadius:4},children:e.jsx("div",{style:{width:`${Math.min(100,R/I*100)}%`,height:"100%",background:`linear-gradient(90deg, ${n.green}, ${n.gold})`,borderRadius:4,transition:"width .5s"}})}),P===$.length?e.jsxs("div",{style:{marginTop:10,textAlign:"center",padding:"8px",borderRadius:10,background:`${n.green}12`},children:[e.jsx("span",{style:{fontSize:20},children:"ğŸ‰"}),e.jsx("p",{style:{fontSize:12,color:n.green,fontWeight:700,margin:"2px 0 0"},children:"Ù…Ø§Ø´Ø§Ø¡ Ø§Ù„Ù„Ù‡! Ø£ØªÙ…Ù…Øª Ø§Ù„Ù€Ù¡Ù¢ Ø±ÙƒØ¹Ø© â€” Ø¨ÙŠØªÙƒ ÙÙŠ Ø§Ù„Ø¬Ù†Ø© Ø¥Ù† Ø´Ø§Ø¡ Ø§Ù„Ù„Ù‡"})]}):e.jsxs("p",{style:{fontFamily:"Amiri",fontSize:11,color:n.textSec,lineHeight:1.9,margin:"8px 0 0"},children:['"',W.text,'"',e.jsxs("span",{style:{fontSize:9,color:n.gold},children:[" â€” ",W.source]})]})]})]}),Y.map(t=>{const a=B[t.key]??[];if(a.length===0)return null;const m=n[t.color],C=a.every(x=>i.nawafelChecks[x.id]);return e.jsxs(E,{style:{marginTop:12,border:C?`1.5px solid ${n.green}30`:`1px solid ${n.border}30`},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:10},children:[e.jsx("div",{style:{width:36,height:36,borderRadius:12,background:`${m}15`,display:"flex",alignItems:"center",justifyContent:"center",fontSize:18,flexShrink:0},children:t.icon}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("span",{style:{fontSize:14,fontWeight:800,color:C?n.green:m},children:["Ù†ÙˆØ§ÙÙ„ ",t.label]}),e.jsxs("p",{style:{fontSize:10,color:n.muted,margin:"1px 0 0"},children:[a.filter(x=>i.nawafelChecks[x.id]).length,"/",a.length," Ù…ÙƒØªÙ…Ù„Ø©"]})]}),C&&e.jsx("span",{style:{fontSize:18},children:"âœ…"})]}),a.map(x=>e.jsx(X,{item:x,done:!!i.nawafelChecks[x.id],onToggle:()=>l({type:"TOGGLE_NAFILA",key:x.id})},x.id))]},t.key)}),e.jsxs(E,{style:{marginTop:14},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:10},children:[e.jsx(T,{icon:"ğŸ”Š",text:"ØµÙˆØª Ø§Ù„Ø£Ø°Ø§Ù†"}),e.jsx("div",{onClick:()=>l({type:"SET_AZAN_ENABLED",enabled:!i.azanEnabled}),onKeyDown:t=>t.key==="Enter"&&l({type:"SET_AZAN_ENABLED",enabled:!i.azanEnabled}),role:"button",tabIndex:0,style:{width:48,height:26,borderRadius:13,background:i.azanEnabled?`linear-gradient(90deg, ${n.green}, ${n.accent})`:`${n.muted}30`,cursor:"pointer",position:"relative",transition:"background .3s",flexShrink:0},children:e.jsx("div",{style:{width:20,height:20,borderRadius:"50%",background:"#fff",position:"absolute",top:3,left:i.azanEnabled?25:3,transition:"left .3s",boxShadow:"0 1px 4px rgba(0,0,0,.2)"}})})]}),e.jsx("p",{style:{fontSize:11,color:n.muted,margin:"0 0 10px",lineHeight:1.6},children:i.azanEnabled?"Ø§Ø®ØªØ± ØµÙˆØª Ø§Ù„Ø£Ø°Ø§Ù† Ø§Ù„Ù…ÙØ¶Ù‘Ù„ Ù„Ùƒ â€” Ø§Ø¶ØºØ· â–¶ï¸ Ù„Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©":"ÙØ¹Ù‘Ù„ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡ Ù„Ø³Ù…Ø§Ø¹ Ø§Ù„Ø£Ø°Ø§Ù† Ø¹Ù†Ø¯ Ø¯Ø®ÙˆÙ„ ÙˆÙ‚Øª Ø§Ù„ØµÙ„Ø§Ø©"}),i.azanEnabled&&e.jsx("div",{style:{animation:"fadeIn .3s"},children:G.map(t=>e.jsx(ee,{sound:t,selected:i.selectedAzan===t.id,onSelect:()=>l({type:"SET_SELECTED_AZAN",id:t.id})},t.id))})]}),S>0&&e.jsxs("div",{style:{marginTop:14,padding:"14px 16px",borderRadius:18,background:r?`linear-gradient(135deg, ${n.purple}0A, ${n.gold}06)`:`linear-gradient(135deg, ${n.purple}0D, ${n.gold}08)`,border:`1px solid ${n.purple}18`,textAlign:"center",animation:"fadeIn .5s"},children:[e.jsx("span",{style:{fontSize:24},children:"ğŸŒŸ"}),e.jsxs("p",{style:{fontSize:13,fontWeight:700,color:n.text,margin:"4px 0 2px"},children:["Ø£ØªÙ…Ù…Øª ",S," Ù…Ù† ",k," Ù†ÙˆØ§ÙÙ„ Ø§Ù„ÙŠÙˆÙ…"]}),e.jsx("p",{style:{fontSize:11,color:n.muted,margin:0},children:S===k?"Ù…Ø§Ø´Ø§Ø¡ Ø§Ù„Ù„Ù‡ â€” ÙŠÙˆÙ… Ù…Ø¨Ø§Ø±Ùƒ!":"Ø§Ø³ØªÙ…Ø± ÙˆØ£ÙƒÙ…Ù„ Ø§Ù„Ø¨Ø§Ù‚ÙŠ â€” Ø§Ù„Ø£Ø¬Ø± Ø¹Ø¸ÙŠÙ…"})]}),e.jsx("div",{style:{height:20}})]})})})}export{se as Salah};
