import{r as l}from"./vendor-D5DBOG1K.js";const S="https://cdn.jsdelivr.net/gh/fawazahmed0/hadith-api@1";function $(t){return t?t.replace(/<br\s*\/?>/gi,`
`).replace(/<[^>]+>/g,""):""}async function g(t="ara-bukhari",n=1){try{const e=`${S}/editions/${t}/${n}.min.json`,r=await fetch(e);if(!r.ok)return null;const a=await r.json(),s=a?.hadiths?.[0]?.text??"",u=a?.metadata?.name??t;return{text:s,source:u}}catch{return null}}function b(t,n=1500){return t%n+1}function k(t,n){const[e,r]=l.useState(()=>n[t%n.length]),[a,o]=l.useState(!0);return l.useEffect(()=>{let s=!1;o(!0);const u=b(t);return g("ara-bukhari",u).then(i=>{s||(i?.text?r(i):r(n[t%n.length]),o(!1))}),()=>{s=!0}},[t,n]),{hadith:e,loading:a}}const E="https://api.aladhan.com/v1";async function w(t="Cairo",n="Egypt",e=5){try{const r=new Date,a=String(r.getDate()).padStart(2,"0"),o=String(r.getMonth()+1).padStart(2,"0"),s=r.getFullYear(),u=`${a}-${o}-${s}`,i=`${E}/timingsByCity/${u}?city=${encodeURIComponent(t)}&country=${encodeURIComponent(n)}&method=${e}`,c=await fetch(i);if(!c.ok)return null;const h=(await c.json())?.data?.timings;if(!h)return null;const m=y=>(y??"").replace(/\s*\(.*\)/,"").trim();return{Fajr:m(h.Fajr),Sunrise:m(h.Sunrise),Dhuhr:m(h.Dhuhr),Asr:m(h.Asr),Maghrib:m(h.Maghrib),Isha:m(h.Isha)}}catch{return null}}function D(t,n,e){const[r,a]=l.useState(null),[o,s]=l.useState(!0),[u,i]=l.useState(!1);return l.useEffect(()=>{let c=!1;return s(!0),i(!1),w(t,n,e).then(d=>{c||(d?(a(d),i(!1)):i(!0),s(!1))}),()=>{c=!0}},[t,n,e]),{times:r,loading:o,error:u}}function j(t){if(!t||!t.trim())return t;const n=t.trim().split(":"),e=parseInt(n[0]??"0",10),r=parseInt(n[1]??"0",10),a=e===0?12:e>12?e-12:e,o=String(r).padStart(2,"0"),s=e<12?"ص":"م";return`${a}:${o} ${s}`}function F(t){const n=[{key:"Fajr",label:"الفجر"},{key:"Sunrise",label:"الشروق"},{key:"Dhuhr",label:"الظهر"},{key:"Asr",label:"العصر"},{key:"Maghrib",label:"المغرب"},{key:"Isha",label:"العشاء"}],e=new Date,r=e.getHours()*60+e.getMinutes();for(const o of n){const s=t[o.key];if(!s)continue;const[u,i]=s.split(":").map(Number),c=(u??0)*60+(i??0);if(c>r)return{key:o.key,label:o.label,time:s,minutesLeft:c-r}}const a=t.Fajr;if(a){const[o,s]=a.split(":").map(Number),u=(o??0)*60+(s??0),i=24*60-r+u;return{key:"Fajr",label:"الفجر (غداً)",time:a,minutesLeft:i}}return null}let f=null;function M(t){return new Promise(n=>{try{p();const e=new Audio(t);e.volume=1,f=e;const r=()=>{e.removeEventListener("error",a),f===e&&(f=null)},a=()=>{r(),p(),n(null)};e.addEventListener("error",a),e.addEventListener("ended",()=>{f===e&&(f=null)}),e.play().then(()=>{e.removeEventListener("error",a),n(e)}).catch(()=>{a()})}catch{n(null)}})}function p(){f&&(f.pause(),f.currentTime=0,f=null)}function T(t,n){const[e,r]=l.useState(()=>n[0]),[a,o]=l.useState(!0);return l.useEffect(()=>{const s=n[t%n.length]??n[0];r(s),o(!0);let u=!1;const i=t%42+1;return g("ara-nawawi",i).then(c=>{u||(c?.text?r(c):r(s),o(!1))}),()=>{u=!0}},[t,n]),{hadith:e,loading:a}}export{T as a,D as b,j as c,$ as f,F as g,M as p,p as s,k as u};
