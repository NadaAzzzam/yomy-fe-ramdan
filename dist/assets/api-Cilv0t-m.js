import{r as l}from"./vendor-D5DBOG1K.js";const p="https://cdn.jsdelivr.net/gh/fawazahmed0/hadith-api@1";function D(e){return e?e.replace(/<br\s*\/?>/gi,`
`).replace(/<[^>]+>/g,""):""}async function g(e="ara-bukhari",t=1){try{const i=`${p}/editions/${e}/${t}.min.json`,n=await fetch(i);if(!n.ok)return null;const s=await n.json(),r=s?.hadiths?.[0]?.text??"",u=s?.metadata?.name??e;return{text:r,source:u}}catch{return null}}function S(e,t=1500){return e%t+1}function j(e,t){const[i,n]=l.useState(()=>t[e%t.length]),[s,a]=l.useState(!0);return l.useEffect(()=>{let r=!1;a(!0);const u=S(e);return g("ara-bukhari",u).then(o=>{r||(o?.text?n(o):n(t[e%t.length]),a(!1))}),()=>{r=!0}},[e,t]),{hadith:i,loading:s}}const b="https://api.aladhan.com/v1";async function A(e="Cairo",t="Egypt",i=5){try{const n=new Date,s=String(n.getDate()).padStart(2,"0"),a=String(n.getMonth()+1).padStart(2,"0"),r=n.getFullYear(),u=`${s}-${a}-${r}`,o=`${b}/timingsByCity/${u}?city=${encodeURIComponent(e)}&country=${encodeURIComponent(t)}&method=${i}`,c=await fetch(o);if(!c.ok)return null;const h=(await c.json())?.data?.timings;if(!h)return null;const d=y=>(y??"").replace(/\s*\(.*\)/,"").trim();return{Fajr:d(h.Fajr),Sunrise:d(h.Sunrise),Dhuhr:d(h.Dhuhr),Asr:d(h.Asr),Maghrib:d(h.Maghrib),Isha:d(h.Isha)}}catch{return null}}function E(e,t,i){const[n,s]=l.useState(null),[a,r]=l.useState(!0),[u,o]=l.useState(!1);return l.useEffect(()=>{let c=!1;return r(!0),o(!1),A(e,t,i).then(m=>{c||(m?(s(m),o(!1)):o(!0),r(!1))}),()=>{c=!0}},[e,t,i]),{times:n,loading:a,error:u}}function $(e){const t=[{key:"Fajr",label:"الفجر"},{key:"Sunrise",label:"الشروق"},{key:"Dhuhr",label:"الظهر"},{key:"Asr",label:"العصر"},{key:"Maghrib",label:"المغرب"},{key:"Isha",label:"العشاء"}],i=new Date,n=i.getHours()*60+i.getMinutes();for(const a of t){const r=e[a.key];if(!r)continue;const[u,o]=r.split(":").map(Number),c=(u??0)*60+(o??0);if(c>n)return{key:a.key,label:a.label,time:r,minutesLeft:c-n}}const s=e.Fajr;if(s){const[a,r]=s.split(":").map(Number),u=(a??0)*60+(r??0),o=24*60-n+u;return{key:"Fajr",label:"الفجر (غداً)",time:s,minutesLeft:o}}return null}let f=null;function F(e){try{k();const t=new Audio(e);return t.volume=1,t.play().catch(()=>{}),f=t,t.addEventListener("ended",()=>{f===t&&(f=null)}),t}catch{return null}}function k(){f&&(f.pause(),f.currentTime=0,f=null)}function M(){return f!==null&&!f.paused}function N(e,t){const[i,n]=l.useState(()=>t[0]),[s,a]=l.useState(!0);return l.useEffect(()=>{const r=t[e%t.length]??t[0];n(r),a(!0);let u=!1;const o=e%42+1;return g("ara-nawawi",o).then(c=>{u||(c?.text?n(c):n(r),a(!1))}),()=>{u=!0}},[e,t]),{hadith:i,loading:s}}export{N as a,E as b,D as f,$ as g,M as i,F as p,k as s,j as u};
