# ุชุญุฏูุซ ูุธุงู ุงูุฅุดุนุงุฑุงุช - Notifications Update

## ๐ ูุง ุงูุฐู ุชู ุฅุถุงูุชูุ

### 1. ุฅุดุนุงุฑุงุช ุชุนูู ุนูุฏ ุฅุบูุงู ุงูุชุทุจูู
ุชู ุงุณุชุจุฏุงู ูุธุงู ุงูุฅุดุนุงุฑุงุช ุงููุฏูู (Web Notifications) ุจูุธุงู ุฌุฏูุฏ ูุณุชุฎุฏู **Capacitor Local Notifications**ุ ููุง ูุนูู:

- โ **ุงูุฅุดุนุงุฑุงุช ุชุนูู ุญุชู ูู ูุงู ุงูุชุทุจูู ูุบูููุง**
- โ **ุงูุฅุดุนุงุฑุงุช ุชุนูู ูู ุงูุฎูููุฉ**
- โ **ุงูุฅุดุนุงุฑุงุช ุชุนูู ุนูู ุฌููุน ุงูููุตุงุช (Android, iOS, Web)**
- โ **ุฌุฏููุฉ ุชููุงุฆูุฉ ููููุฉ ููุฅุดุนุงุฑุงุช**

### 2. ุฅุดุนุงุฑุงุช ุงูุตูุงุฉ ุนูู ุงููุจู ๐
ุชู ุฅุถุงูุฉ ููุฒุฉ ุฌุฏูุฏุฉ ุชูุงููุง:
- ูููู ูููุณุชุฎุฏู ุฅุถุงูุฉ ุฃููุงุช ูุชุนุฏุฏุฉ ููุชุฐููุฑ ุจุงูุตูุงุฉ ุนูู ุงููุจู ๏ทบ
- ุฑุณุงุฆู ุนุฑุจูุฉ ูุชููุนุฉ ูููุญูุฒุฉ
- ุฅุดุนุงุฑุงุช ููููุฉ ุชุชูุฑุฑ ุชููุงุฆููุง
- ุฅููุงููุฉ ุฅุถุงูุฉ/ุญุฐู ุงูุฃููุงุช ุจุณูููุฉ

---

## ๐ฆ ุงูุชุบููุฑุงุช ุงูุชูููุฉ

### ุงููููุงุช ุงูููุนุฏูุฉ:

#### 1. `package.json`
```json
"dependencies": {
  "@capacitor/local-notifications": "^8.0.1"
}
```

#### 2. `capacitor.config.ts`
ุชู ุฅุถุงูุฉ ุฅุนุฏุงุฏุงุช plugin ุงูุฅุดุนุงุฑุงุช:
```typescript
plugins: {
  LocalNotifications: {
    smallIcon: 'ic_stat_icon_config_sample',
    iconColor: '#D4AF37',
    sound: 'beep.wav',
  },
}
```

#### 3. `src/lib/state.ts`
- ุฅุถุงูุฉ ุญูู ุฌุฏูุฏ: `salahAlaNabyTimes: string[]`
- ุฅุถุงูุฉ actions ุฌุฏูุฏุฉ:
  - `SET_SALAH_ALA_NABY_TIMES`
  - `ADD_SALAH_ALA_NABY_TIME`
  - `REMOVE_SALAH_ALA_NABY_TIME`

#### 4. `src/lib/notifications.ts`
**ุฅุนุงุฏุฉ ูุชุงุจุฉ ูุงููุฉ** ููููู ุจุงุณุชุฎุฏุงู Capacitor Local Notifications:

**ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ:**
- `requestNotificationPermission()` - ุทูุจ ุงูุตูุงุญูุงุช (native + web)
- `scheduleNotifications()` - ุฌุฏููุฉ ุฌููุน ุงูุฅุดุนุงุฑุงุช ุจุดูู native
- `cancelScheduledNotifications()` - ุฅูุบุงุก ุฌููุน ุงูุฅุดุนุงุฑุงุช
- ุฏุนู ูุงูู ููููุตุงุช ุงููุฎุชููุฉ (native + web fallback)
- ุฌุฏููุฉ ููููุฉ ูุชูุฑุฑุฉ ุชููุงุฆููุง

**ุฃููุงุน ุงูุฅุดุนุงุฑุงุช ุงูููุฌุฏููุฉ:**
1. **ุฅุดุนุงุฑ ุงูุฏุนุงุก ุงููููู** - ููุช ูุงุญุฏ ูุฎุชุงุฑู ุงููุณุชุฎุฏู
2. **ุชุฐููุฑุงุช ุชุญููุฒูุฉ** - 3 ูุฑุงุช ูููููุง (9 ุตุจุงุญูุงุ 2 ุธูุฑูุงุ 8 ูุณุงุกู)
3. **ุชุฐููุฑุงุช ุงูุชุญุฏูุงุช** - ูุฑุชูู ูููููุง (3 ุนุตุฑูุงุ 6 ูุณุงุกู)
4. **ุฅุดุนุงุฑ ุงูุนุดุฑ ุงูุฃูุงุฎุฑ** - 10 ูุณุงุกู (ููููู 21-30 ูู ุฑูุถุงู)
5. **ุงูุตูุงุฉ ุนูู ุงููุจู** - ุฃููุงุช ูุญุฏุฏูุง ุงููุณุชุฎุฏู (ูุชุนุฏุฏุฉ)

#### 5. `src/pages/Notes.tsx`
ุชู ุฅุถุงูุฉ ูุณู ุฌุฏูุฏ ูู ุชุจููุจ "ุงูุฃุฏุนูุฉ":

```tsx
<Card glow>
  <Sec icon="๐" text="ุงูุตูุงุฉ ุนูู ุงููุจู" />
  {/* ูุงุฌูุฉ ูุฅุถุงูุฉ/ุญุฐู ุงูุฃููุงุช */}
</Card>
```

**ุงููุธุงุฆู:**
- ุญูู time picker ูุฅุถุงูุฉ ููุช ุฌุฏูุฏ
- ูุงุฆูุฉ ุจุฌููุน ุงูุฃููุงุช ุงูููุถุงูุฉ
- ุฒุฑ ุญุฐู ููู ููุช
- ุฑุณุงุฆู ูุงุถุญุฉ ุนูุฏ ุนุฏู ูุฌูุฏ ุฃููุงุช

#### 6. `src/App.tsx`
ุชุญุฏูุซ useEffect ูุชุถููู `salahAlaNabyTimes`:
```typescript
useEffect(() => {
  scheduleNotifications(
    state.duas,
    state.duaNotificationTime,
    state.remindersEnabled,
    ramInfo.day,
    state.salahAlaNabyTimes // โ ุฌุฏูุฏ
  );
}, [..., state.salahAlaNabyTimes]); // โ ุฌุฏูุฏ
```

---

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### ูููุณุชุฎุฏู ุงูููุงุฆู:

1. **ุงูุชุญ ุงูุชุทุจูู**
2. **ุงุฐูุจ ูุชุจููุจ "ุงููุฒูุฏ"** โ **"ุฏูุชุฑ"**
3. **ุงุถุบุท ุนูู ุชุจููุจ "ุฃุฏุนูุฉ"**
4. **ุงุณูุญ ุจุงูุฅุดุนุงุฑุงุช** (ุฅุฐุง ูู ุชุณูุญ ูู ูุจู)
5. **ูุณู "ุงูุตูุงุฉ ุนูู ุงููุจู":**
   - ุงุฎุชุฑ ููุชูุง ูู ุญูู ุงูููุช
   - ุณูุชู ุฅุถุงูุชู ุชููุงุฆููุง
   - ููููู ุฅุถุงูุฉ ุฃููุงุช ูุชุนุฏุฏุฉ
   - ุงุถุบุท "ุญุฐู" ูุฅุฒุงูุฉ ุฃู ููุช

### ูููุทูุฑ:

```bash
# ุชุซุจูุช ุงูุชุจุนูุงุช
npm install

# ุงูุจูุงุก
npm run build

# ูุฒุงููุฉ Capacitor
npm run cap:sync

# ูุชุญ Android Studio
npm run cap:android

# ุซู ุงุถุบุท Run ูู Android Studio
```

---

## ๐ ุงูุชูุงุตูู ุงูุชูููุฉ

### ูุนุฑูุงุช ุงูุฅุดุนุงุฑุงุช (Notification IDs):
```typescript
const CHANNEL_DUA = 1000;
const CHANNEL_REMINDER_START = 2000;     // 2000, 2001, 2002
const CHANNEL_CHALLENGE_START = 3000;    // 3000, 3001
const CHANNEL_LAST_TEN = 4000;
const CHANNEL_SALAH_ALA_NABY_START = 5000; // 5000-5009
```

### ุฑุณุงุฆู ุงูุตูุงุฉ ุนูู ุงููุจู:
```typescript
const SALAH_ALA_NABY_MESSAGES = [
  'ุงูููู ุตู ุนูู ูุญูุฏ ูุนูู ุขู ูุญูุฏ ููุง ุตููุช ุนูู ุฅุจุฑุงููู ูุนูู ุขู ุฅุจุฑุงููู',
  'ุงูููู ุจุงุฑู ุนูู ูุญูุฏ ูุนูู ุขู ูุญูุฏ ููุง ุจุงุฑูุช ุนูู ุฅุจุฑุงููู ูุนูู ุขู ุฅุจุฑุงููู',
  'ุตูู ุงููู ุนููู ูุณูู โ ุฃูุซุฑ ูู ุงูุตูุงุฉ ุนูู ุงููุจู ุงูููู ๐',
  'ุงูููู ุตู ูุณูู ูุจุงุฑู ุนูู ุณูุฏูุง ูุญูุฏ',
  'ุงูููู ุตู ุนูู ูุญูุฏ ุงููุจู ุงูุฃูู ูุนูู ุขูู ูุตุญุจู ูุณูู ุชุณูููุงู',
];
```

### ููู ูุนูู ุงูุฌุฏููุฉ:
```typescript
// ูุซุงู: ุฌุฏููุฉ ุฅุดุนุงุฑ ุงูุณุงุนุฉ 3 ุนุตุฑูุง
const nextAt = getNextOccurrence(15, 0); // ุงูููู ุฃู ุบุฏูุง
await LocalNotifications.schedule({
  notifications: [{
    id: 5000,
    title: 'ุงูุตูุงุฉ ุนูู ุงููุจู ๐',
    body: 'ุงูููู ุตู ูุณูู ุนูู ุณูุฏูุง ูุญูุฏ',
    schedule: { 
      at: nextAt,        // ุงูููุช ุงููุญุฏุฏ
      repeats: true,     // ูุชูุฑุฑ
      every: 'day'       // ูู ููู
    }
  }]
});
```

---

## โ ุงูุงุฎุชุจุงุฑ

### ุนูู Web (ููุชุทููุฑ):
```bash
npm run dev
```
- ุงูุฅุดุนุงุฑุงุช ุณุชุธูุฑ ูู browser notifications
- ูุง ุชุนูู ูู ุงูุฎูููุฉ (ูุฐุง ุทุจูุนู ููู web)

### ุนูู Android/iOS (ุงูุฅูุชุงุฌ):
```bash
npm run build:android
npm run cap:android
```
- ุงูุฅุดุนุงุฑุงุช native ูุงููุฉ
- ุชุนูู ูู ุงูุฎูููุฉ
- ุชุนูู ุนูุฏ ุฅุบูุงู ุงูุชุทุจูู
- ุชุชูุฑุฑ ูููููุง ุชููุงุฆููุง

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: ุงูุฅุดุนุงุฑุงุช ูุง ุชุธูุฑ
**ุงูุญู:**
1. ุชุฃูุฏ ูู ุงูุณูุงุญ ุจุงูุฅุดุนุงุฑุงุช ูู ุฅุนุฏุงุฏุงุช ุงูุฌูุงุฒ
2. ูู Android: Settings โ Apps โ ูููู โ Notifications โ Enable
3. ุงุถุบุท ุฒุฑ "ุงูุณูุงุญ ุจุงูุฅุดุนุงุฑุงุช" ูู ุงูุชุทุจูู

### ุงููุดููุฉ: ุงูุฅุดุนุงุฑุงุช ุชุธูุฑ ุนูู Web ููู ููุณ ุนูู Android
**ุงูุญู:**
```bash
npm run build
npm run cap:sync
```
ุซู ุฃุนุฏ ุจูุงุก ุงูุชุทุจูู ูู Android Studio

### ุงููุดููุฉ: ุงูุฅุดุนุงุฑุงุช ูุง ุชุชูุฑุฑ
**ุงูุญู:**
- ูุฐู ููุฒุฉ native ููุท
- ุนูู web ุณุชุญุชุงุฌ ูุฅุนุงุฏุฉ ูุชุญ ุงูุชุทุจูู ูู ููู
- ุนูู Android/iOS ุณุชุชูุฑุฑ ุชููุงุฆููุง

---

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ุงูุตูุงุญูุงุช ูุทููุจุฉ**: ุงููุณุชุฎุฏู ูุฌุจ ุฃู ูุณูุญ ุจุงูุฅุดุนุงุฑุงุช
2. **ุญุฏ ุฃูุตู 10 ุฃููุงุช**: ููุตูุงุฉ ุนูู ุงููุจู (5000-5009)
3. **ุงูุชูุฑุงุฑ ุงููููู**: ุฌููุน ุงูุฅุดุนุงุฑุงุช ุชุชูุฑุฑ ุชููุงุฆููุง ูู 24 ุณุงุนุฉ
4. **ุงูุฑุณุงุฆู ุงูุนุดูุงุฆูุฉ**: ูุชู ุงุฎุชูุงุฑ ุฑุณุงูุฉ ุนุดูุงุฆูุฉ ูู ุงููุงุฆูุฉ
5. **Web Fallback**: ุนูู web ุชุธูุฑ ุฅุดุนุงุฑุงุช browser ุนุงุฏูุฉ
6. **Battery Optimization**: ูุฏ ุชุญุชุงุฌ ูุชุนุทูู battery optimization ููุชุทุจูู ุนูู Android

---

## ๐จ ุงูุชุญุณููุงุช ุงููุณุชูุจููุฉ (ุงุฎุชูุงุฑู)

- [ ] ุฅุถุงูุฉ ุฃุตูุงุช ูุฎุชููุฉ ููุฅุดุนุงุฑุงุช
- [ ] ุฅุถุงูุฉ ุตูุฑ ููุฅุดุนุงุฑุงุช
- [ ] ุฅุดุนุงุฑุงุช ุฃุณุจูุนูุฉ (ูู ุฌูุนุฉ ูุซูุงู)
- [ ] ุฅุญุตุงุฆูุงุช: ูู ูุฑุฉ ูุชุญ ุงููุณุชุฎุฏู ุงูุฅุดุนุงุฑ
- [ ] ุชุฎุตูุต ุงูุฑุณุงุฆู (ููุชุจ ุงููุณุชุฎุฏู ุฑุณุงูุชู ุงูุฎุงุตุฉ)

---

## ๐ ุงููุฑุงุฌุน

- [Capacitor Local Notifications](https://capacitorjs.com/docs/apis/local-notifications)
- [Ionic React](https://ionicframework.com/docs/react)

---

ุชู ุงูุชุญุฏูุซ ุจูุฌุงุญ! โจ
